<!-- 访客预约页面 -->
<view class="container">
  <view class="form-card">
    <view class="form-title">访客预约</view>
    
    <view class="form-item">
      <text class="label">访客姓名</text>
      <input 
        class="input" 
        placeholder="请输入访客姓名"
        value="{{form.visitorName}}"
        bindinput="onNameInput"
      />
    </view>

    <view class="form-item">
      <text class="label">访客电话</text>
      <input 
        class="input" 
        type="number"
        maxlength="11"
        placeholder="请输入访客手机号"
        value="{{form.visitorPhone}}"
        bindinput="onPhoneInput"
      />
    </view>

    <view class="form-item">
      <text class="label">车牌号</text>
      <input 
        class="input" 
        placeholder="如有车辆请填写车牌号"
        value="{{form.plateNumber}}"
        bindinput="onPlateInput"
      />
    </view>

    <view class="form-item">
      <text class="label">到访时间</text>
      <picker mode="multiSelector" range="{{timeRange}}" bindchange="onTimeChange">
        <view class="picker {{form.visitTime ? '' : 'placeholder'}}">
          {{form.visitTime || '请选择到访时间'}}
        </view>
      </picker>
    </view>

    <view class="form-item">
      <text class="label">预计离开时间</text>
      <picker mode="multiSelector" range="{{timeRange}}" bindchange="onLeaveTimeChange">
        <view class="picker {{form.leaveTime ? '' : 'placeholder'}}">
          {{form.leaveTime || '请选择预计离开时间'}}
        </view>
      </picker>
    </view>

    <view class="form-item">
      <text class="label">来访事由</text>
      <textarea 
        class="textarea" 
        placeholder="请简述来访事由..."
        maxlength="200"
        value="{{form.reason}}"
        bindinput="onReasonInput"
      />
    </view>

    <button class="btn-submit" bindtap="submitVisitor">提交预约</button>
  </view>

  <!-- 预约记录 -->
  <view class="record-section">
    <view class="section-title">最近预约记录</view>
    <view class="record-list">
      <view class="record-card" wx:for="{{records}}" wx:key="id">
        <view class="record-header">
          <text class="visitor-name">{{item.visitorName}}</text>
          <text class="record-status {{item.status}}">{{item.statusText}}</text>
        </view>
        <view class="record-info">
          <text>到访时间：{{item.visitTime}}</text>
          <text wx:if="{{item.plateNumber}}">车牌号：{{item.plateNumber}}</text>
        </view>
        <view class="record-footer">
          <text class="record-no">预约码：{{item.code}}</text>
          <button class="btn-share" bindtap="shareCode" data-code="{{item.code}}">分享访客码</button>
        </view>
      </view>
    </view>

    <view class="empty-state" wx:if="{{records.length === 0}}">
      <text>暂无预约记录</text>
    </view>
  </view>
</view>
